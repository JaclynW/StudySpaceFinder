<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="assets/icon.png" type="image/png">
    <link rel="stylesheet" href="css/reviewerDashboard.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Reviewer Dashboard</title>
</head>

<body>

    <nav id="navbar">
        <div id="logo"><a href="index.html">Study Spot Finder</a></div>
        <form id="search-form">
            <div id="search-box">
                <input type="search" id="search-input" placeholder="Enter zipcode..." pattern="^\d{5}$"
                    title="Enter a 5-digit ZIP code.">
                <button id="search-btn">&#128269;</button>
                <button type="button" id="close-btn">&#10006;</button>
            </div>
            <div id="error-message" style="color: red; display: none;">Please enter a valid ZIP code.</div>
        </form>

    </nav>
    <header>
        <h1>Reviewer Dashboard</h1>
    </header>


    <section id="submitListing">
        <h2>Submit a Study Spot</h2>
        <form id="studySpotForm" method="post">
            <!-- Form fields for submitting a new study spot -->
            <section id="submissionForm">
                <form id="studySpotForm" method="post">
                    <label for="name">Study Spot Name:</label>
                    <input type="text" id="name" name="name" required>

                    <label for="location">Location:</label>
                    <input type="text" id="location" name="location" required>

                    <label for="wifi">Wi-Fi Available:</label>
                    <select id="wifi" name="wifi">
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>

                    <label for="outlets">Power Outlets Available:</label>
                    <select id="outlets" name="outlets">
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>

                    <label for="hours">Opening Hours:</label>
                    <input type="text" id="hours" name="hours">

                    <label for="additionalInfo">Additional Information:</label>
                    <textarea id="additionalInfo" name="additionalInfo"></textarea>

                    <button type="submit">Submit</button>
                </form>
            </section>
        </form>
    </section>

    <section id="submittedListings">
        <h2>Submitted Listings</h2>
        <ul>
            <!-- Dynamically loaded submitted listings and their status -->
            <li>
                Quiet Study Cafe - <strong>Status: Pending Approval</strong>
            </li>
        </ul>
    </section>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Handler for form submission
            document.getElementById('studySpotForm').addEventListener('submit', function (event) {
                event.preventDefault(); // Prevent the default form submission behavior

                // Collect form data as an example
                const studySpotData = {
                    name: document.getElementById('name').value,
                    location: document.getElementById('location').value,
                    wifi: document.getElementById('wifi').value,
                    outlets: document.getElementById('outlets').value,
                    hours: document.getElementById('hours').value,
                    additionalInfo: document.getElementById('additionalInfo').value
                };

                console.log('Submitting study spot:', studySpotData);

                // Placeholder for sending data to the server/database
                console.log('Placeholder: This data would be sent to a server endpoint to add to the database.');
            });
        });

        function fetchAndDisplaySubmissions() {
            // Placeholder data - in a real scenario, this would come from the server
            const submissions = [
                { id: 1, name: 'Quiet Study Cafe', status: 'Pending Approval' },
                { id: 2, name: 'Downtown Library', status: 'Pending Approval' }
            ];

            // Simulating fetching data
            console.log('Fetching pending submissions from the server...');

            // Optionally sort the submissions, e.g., by name
            submissions.sort((a, b) => a.name.localeCompare(b.name));

            // Simulate displaying the fetched and sorted submissions
            const submissionsListElement = document.getElementById('submittedListings').querySelector('ul');
            submissionsListElement.innerHTML = ''; // Clear existing list items

            submissions.forEach(submission => {
                const listItem = document.createElement('li');
                listItem.textContent = `${submission.name} - Status: ${submission.status}`;
                submissionsListElement.appendChild(listItem);
            });

            console.log('Displayed sorted pending submissions.');
        }

        // Call the function to fetch and display submissions
        fetchAndDisplaySubmissions();


        // Search query in the search bar
        document.getElementById('search-form').addEventListener('search-btn', function (event) {
            var searchInput = document.getElementById('search-input');
            var errorMessage = document.getElementById('error-message');

            // Check if the search input's value matches the pattern
            if (!searchInput.checkValidity()) {
                event.preventDefault(); // Prevent form submission
                errorMessage.style.display = 'block'; // Show the error message
            } else {
                errorMessage.style.display = 'none'; // Hide the error message

                //Redirect to listing page with fresh query search 

            }
        });
        
    </script>



</body>

</html>